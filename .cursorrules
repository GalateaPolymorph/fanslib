# FansLib AI coding rules (Cursor)

Applies across the repo unless a subdirectory has its own, more specific rules.

## Non-negotiables

- TypeScript only; prefer `type` over `interface`.
- Functional + declarative; avoid mutation; never use classes or inheritance.
- Never use loops (`for`, `while`, `do/while`, `for...in`); prefer `.map/.filter/.reduce/.some/.every/.find` + helpers. Only exception: `for await...of` for `AsyncIterable`.
- Always use arrow functions; named exports only; never default exports.
- Prefer early returns over `if/else` nesting.
- Event callbacks: don’t use `handle*`; name after the action (`toggleMenu`, `submitForm`, `closeDialog`).
- Directory names should be lowercase with dashes.

## React

- Prefer functional components with explicit props types.
- Don’t manually manage data-fetching state with `useEffect` + `useState`; use TanStack Query (or the project’s established data layer).

## Repo specifics

- Bun + Turborepo monorepo: use `bun` (not npm/yarn/pnpm).
- Web: React 19 + TanStack Start/Router/Query.
- Server: Bun + Elysia + TypeORM + SQLite; Eden treaty + devalue.

## Safety

- Never run or trigger Playwright-based Reddit automation without explicit user permission.

## Source of truth

- If present, also follow `CLAUDE.md` (repo root) and `.github/copilot-instructions.md`.
